persistence:
  class: smb
  # generated by SMB storage CSI controller
  #
  # if reclaiming remember to do this if pvc is stuck in PENDING
  # https://github.com/kubernetes-csi/csi-driver-smb/issues/821
  volumeName: pvc-c463743b-6437-4f45-8e6d-4fd49974ca03
  size: 128Gi

docker-registry-ui:
  registry:
    enabled: true
    dataVolume:
      persistentVolumeClaim:
        claimName: docker-registry-pvc
    ingress:
      enabled: true
      host: docker.home.k8s
      annotations:
        nginx.ingress.kubernetes.io/proxy-body-size: "0"
        nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
        nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
  ui:
    ingress:
        enabled: true
        # automatically has a prefix of /v2
        host: docker.home.k8s
        annotations:
          nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
          nginx.ingress.kubernetes.io/force-ssl-redirect: "false"
          nginx.ingress.kubernetes.io/ssl-passthrough: "false"
          nginx.ingress.kubernetes.io/auth-url: https://oauth2-proxy.home.k8s:30443/oauth2/auth
          # don't feel too good about this; ideally should be $server_port, but
          # using a NodePort instead of an actual LB doesn't seem to allow this (TBD)
          nginx.ingress.kubernetes.io/auth-signin: "https://oauth2-proxy.home.k8s:30443/oauth2/start?rd=$scheme://$host:30443$request_uri"
          nginx.ingress.kubernetes.io/auth-response-headers: X-Auth-Request-User,X-Auth-Request-Email,X-Forwarded-Groups
