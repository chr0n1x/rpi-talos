{{ range .Values.widgetConfigs }}
---
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: env-vars-secrets-vaultsecret-ref
  namespace: {{ .Values.longhorn.namespaceOverride | default .Release.Namespace }}
spec:
  type: kv-v2
  mount: in-cluster
  path: {{ .path }}
  destination:
    name: cifs-backup-target-creds
    create: true
    overwrite: true
  refreshAfter: 30s
  vaultAuthRef: {{ .Values.longhorn.namespaceOverride | default .Release.Namespace -}}/longhorn-vso-connection-auth
{{ end }}
